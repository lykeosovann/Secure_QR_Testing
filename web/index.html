<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secure QR Receiver</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 2rem; line-height: 1.45; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 1rem 1.25rem; max-width: 900px; }
    pre, code { background: #f6f6f6; border-radius: 10px; padding: .75rem; overflow-x: auto; }
    pre { white-space: pre-wrap; word-break: break-word; }
    .muted { color: #666; }
    .ok { color: #0a7a2f; font-weight: 600; }
    .warn { color: #9a5b00; font-weight: 600; }
    a { color: inherit; }
  </style>
</head>
<body>
  <h1>Secure QR Receiver</h1>

  <div class="card">
    <p class="muted">
      This GitHub Pages site is <b>static</b> (HTML/JS only). It can read the QR token from the URL,
      but it <b>does not decrypt</b> AES tokens here (the secret must stay private).
    </p>

    <h3>Status</h3>
    <p id="status" class="warn">No token found.</p>

    <h3>Token from URL parameter <code>t</code></h3>
    <pre id="token">(none)</pre>

    <h3>How to test quickly</h3>
    <p class="muted">Open this page with a test token:</p>
    <pre id="testUrl"></pre>

    <h3>Next step (verification)</h3>
    <p class="muted">
      Verification/decryption should be done on a backend (or locally with your Python script),
      not in the browser.
    </p>
    <pre>Backend verification: not configured (GitHub Pages demo).</pre>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const token = params.get("t");

    const statusEl = document.getElementById("status");
    const tokenEl = document.getElementById("token");
    const testUrlEl = document.getElementById("testUrl");

    // Show a sample test URL (so you can confirm GitHub Pages is serving correctly)
    const base = window.location.origin + window.location.pathname;
    testUrlEl.textContent = base + "?t=HELLO";

    if (token) {
      statusEl.textContent = "Token received âœ…";
      statusEl.className = "ok";
      tokenEl.textContent = token;
    } else {
      statusEl.textContent = "No token found. Scan a QR code or add ?t=... to the URL.";
      statusEl.className = "warn";
      tokenEl.textContent = "(none)";
    }
  </script>
</body>
</html>
